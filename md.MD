# –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö: –ë–∏–±–ª–∏–æ—Ç–µ–∫–∞

–≠—Ç–æ—Ç –ø—Ä–æ–µ–∫—Ç —Ä–µ–∞–ª–∏–∑—É–µ—Ç –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –±–∏–±–ª–∏–æ—Ç–µ–∫–æ–π –Ω–∞ SQLite.  
–í–∫–ª—é—á–∞–µ—Ç 15 —Ç–∞–±–ª–∏—Ü, –≤–Ω–µ—à–Ω–∏–µ –∫–ª—é—á–∏, —Å–≤—è–∑–∏ –º–µ–∂–¥—É —Å—É—â–Ω–æ—Å—Ç—è–º–∏, –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è, —Ç—Ä–∏–≥–≥–µ—Ä—ã –∏ –ø—Ä–∏–º–µ—Ä—ã SQL-–∑–∞–ø—Ä–æ—Å–æ–≤.

---

## üß© –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

–ü—Ä–æ–µ–∫—Ç —Å–æ—Å—Ç–æ–∏—Ç –∏–∑ —Å–ª–µ–¥—É—é—â–∏—Ö —Ç–∞–±–ª–∏—Ü:

| ‚Ññ | –¢–∞–±–ª–∏—Ü–∞             | –û–ø–∏—Å–∞–Ω–∏–µ                           |
|---|---------------------|------------------------------------|
| 1 | `authors`           | –ê–≤—Ç–æ—Ä—ã –∫–Ω–∏–≥                        |
| 2 | `books`             | –ö–Ω–∏–≥–∏                              |
| 3 | `genres`            | –ñ–∞–Ω—Ä—ã –∫–Ω–∏–≥                         |
| 4 | `libraries`         | –ë–∏–±–ª–∏–æ—Ç–µ–∫–∏                         |
| 5 | `stock`             | –ù–∞–ª–∏—á–∏–µ –∫–Ω–∏–≥ –≤ –±–∏–±–ª–∏–æ—Ç–µ–∫–∞—Ö        |
| 6 | `readers`           | –ß–∏—Ç–∞—Ç–µ–ª–∏                           |
| 7 | `orders`            | –ó–∞–∫–∞–∑—ã/–≤—ã–¥–∞—á–∏ –∫–Ω–∏–≥                 |
| 8 | `reviews`           | –û—Ç–∑—ã–≤—ã –Ω–∞ –∫–Ω–∏–≥–∏                    |
| 9 | `employees`         | –°–æ—Ç—Ä—É–¥–Ω–∏–∫–∏ –±–∏–±–ª–∏–æ—Ç–µ–∫               |
|10 | `roles`             | –†–æ–ª–∏ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤                   |
|11 | `employee_roles`    | –°–≤—è–∑—å —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤ –∏ —Ä–æ–ª–µ–π          |
|12 | `notifications`     | –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è —á–∏—Ç–∞—Ç–µ–ª—è–º              |
|13 | `settings`          | –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–∏—Å—Ç–µ–º—ã                   |
|14 | `logs`              | –õ–æ–≥–∏ –æ–ø–µ—Ä–∞—Ü–∏–π                      |
|15 | `payments`          | –ü–ª–∞—Ç–µ–∂–∏ –∑–∞ –∫–Ω–∏–≥–∏                   |

---

## üìã –¢–∞–±–ª–∏—Ü—ã –∏ –∏—Ö –æ–ø–∏—Å–∞–Ω–∏–µ

### 1. `authors` ‚Äî –ê–≤—Ç–æ—Ä—ã –∫–Ω–∏–≥
–•—Ä–∞–Ω–∏—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ–± –∞–≤—Ç–æ—Ä–∞—Ö.

| –ü–æ–ª–µ         | –¢–∏–ø           | –û–ø–∏—Å–∞–Ω–∏–µ                     |
|--------------|---------------|------------------------------|
| author_id    | INTEGER       | –£–Ω–∏–∫–∞–ª—å–Ω—ã–π ID –∞–≤—Ç–æ—Ä–∞         |
| name         | TEXT NOT NULL | –ò–º—è –∞–≤—Ç–æ—Ä–∞                   |
| birth_year   | INTEGER       | –ì–æ–¥ —Ä–æ–∂–¥–µ–Ω–∏—è                 |
| country      | TEXT          | –°—Ç—Ä–∞–Ω–∞                       |

**–°–≤—è–∑–∏:**
- `books.author_id ‚Üí authors.author_id`

---

### 2. `books` ‚Äî –ö–Ω–∏–≥–∏
–û—Å–Ω–æ–≤–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞, —Ö—Ä–∞–Ω—è—â–∞—è –¥–∞–Ω–Ω—ã–µ –æ –∫–Ω–∏–≥–∞—Ö.

| –ü–æ–ª–µ                  | –¢–∏–ø           | –û–ø–∏—Å–∞–Ω–∏–µ                            |
|-----------------------|---------------|-------------------------------------|
| book_id               | INTEGER       | –£–Ω–∏–∫–∞–ª—å–Ω—ã–π ID –∫–Ω–∏–≥–∏                |
| title                 | TEXT NOT NULL | –ù–∞–∑–≤–∞–Ω–∏–µ –∫–Ω–∏–≥–∏                     |
| author_id             | INTEGER       | –í–Ω–µ—à–Ω–∏–π –∫–ª—é—á –∫ `authors`          |
| genre_id              | INTEGER       | –í–Ω–µ—à–Ω–∏–π –∫–ª—é—á –∫ `genres`           |
| publication_year      | INTEGER       | –ì–æ–¥ –∏–∑–¥–∞–Ω–∏—è                        |
| isbn                  | TEXT UNIQUE   | ISBN                               |
| description           | TEXT          | –û–ø–∏—Å–∞–Ω–∏–µ –∫–Ω–∏–≥–∏                    |

**–°–≤—è–∑–∏:**
- `stock.book_id ‚Üí books.book_id`
- `orders.book_id ‚Üí books.book_id`
- `reviews.book_id ‚Üí books.book_id`
- `payments.book_id ‚Üí books.book_id`

---

### 3. `genres` ‚Äî –ñ–∞–Ω—Ä—ã –∫–Ω–∏–≥
–°–ø–∏—Å–æ–∫ –∂–∞–Ω—Ä–æ–≤.

| –ü–æ–ª–µ         | –¢–∏–ø           | –û–ø–∏—Å–∞–Ω–∏–µ                     |
|--------------|---------------|------------------------------|
| genre_id     | INTEGER       | –£–Ω–∏–∫–∞–ª—å–Ω—ã–π ID –∂–∞–Ω—Ä–∞          |
| name         | TEXT NOT NULL | –ù–∞–∑–≤–∞–Ω–∏–µ –∂–∞–Ω—Ä–∞               |

**–°–≤—è–∑–∏:**
- `books.genre_id ‚Üí genres.genre_id`

---

### 4. `libraries` ‚Äî –ë–∏–±–ª–∏–æ—Ç–µ–∫–∏
–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –±–∏–±–ª–∏–æ—Ç–µ–∫–∞—Ö.

| –ü–æ–ª–µ         | –¢–∏–ø           | –û–ø–∏—Å–∞–Ω–∏–µ                     |
|--------------|---------------|------------------------------|
| library_id   | INTEGER       | –£–Ω–∏–∫–∞–ª—å–Ω—ã–π ID –±–∏–±–ª–∏–æ—Ç–µ–∫–∏     |
| name         | TEXT NOT NULL | –ù–∞–∑–≤–∞–Ω–∏–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏          |
| address      | TEXT          | –ê–¥—Ä–µ—Å                          |
| phone        | TEXT          | –¢–µ–ª–µ—Ñ–æ–Ω                        |

**–°–≤—è–∑–∏:**
- `stock.library_id ‚Üí libraries.library_id`
- `orders.library_id ‚Üí libraries.library_id`
- `employees.library_id ‚Üí libraries.library_id`

---

### 5. `stock` ‚Äî –ù–∞–ª–∏—á–∏–µ –∫–Ω–∏–≥ –≤ –±–∏–±–ª–∏–æ—Ç–µ–∫–∞—Ö
–£–∫–∞–∑—ã–≤–∞–µ—Ç, —Å–∫–æ–ª—å–∫–æ —ç–∫–∑–µ–º–ø–ª—è—Ä–æ–≤ –∫–Ω–∏–≥–∏ –µ—Å—Ç—å –≤ –±–∏–±–ª–∏–æ—Ç–µ–∫–µ.

| –ü–æ–ª–µ         | –¢–∏–ø           | –û–ø–∏—Å–∞–Ω–∏–µ                             |
|--------------|---------------|--------------------------------------|
| stock_id     | INTEGER       | –£–Ω–∏–∫–∞–ª—å–Ω—ã–π ID –∑–∞–ø–∏—Å–∏                 |
| book_id      | INTEGER       | –í–Ω–µ—à–Ω–∏–π –∫–ª—é—á –∫ `books`              |
| library_id   | INTEGER       | –í–Ω–µ—à–Ω–∏–π –∫–ª—é—á –∫ `libraries`          |
| quantity     | INTEGER       | –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö —ç–∫–∑–µ–º–ø–ª—è—Ä–æ–≤     |

**–°–≤—è–∑–∏:**
- `stock.book_id ‚Üí books.book_id`
- `stock.library_id ‚Üí libraries.library_id`

---

### 6. `readers` ‚Äî –ß–∏—Ç–∞—Ç–µ–ª–∏
–î–∞–Ω–Ω—ã–µ –æ —á–∏—Ç–∞—Ç–µ–ª—è—Ö.

| –ü–æ–ª–µ              | –¢–∏–ø           | –û–ø–∏—Å–∞–Ω–∏–µ                             |
|-------------------|---------------|--------------------------------------|
| reader_id         | INTEGER       | –£–Ω–∏–∫–∞–ª—å–Ω—ã–π ID —á–∏—Ç–∞—Ç–µ–ª—è              |
| first_name        | TEXT NOT NULL | –ò–º—è —á–∏—Ç–∞—Ç–µ–ª—è                       |
| last_name         | TEXT NOT NULL | –§–∞–º–∏–ª–∏—è —á–∏—Ç–∞—Ç–µ–ª—è                   |
| email             | TEXT UNIQUE   | Email                                |
| registration_date | DATE          | –î–∞—Ç–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏                    |

**–°–≤—è–∑–∏:**
- `orders.reader_id ‚Üí readers.reader_id`
- `reviews.reader_id ‚Üí readers.reader_id`
- `notifications.reader_id ‚Üí readers.reader_id`

---

### 7. `orders` ‚Äî –ó–∞–∫–∞–∑—ã/–≤—ã–¥–∞—á–∏ –∫–Ω–∏–≥
–ó–∞–ø–∏—Å—ã–≤–∞–µ—Ç, –∫—Ç–æ –≤–∑—è–ª –∫–Ω–∏–≥—É, –∫–æ–≥–¥–∞ –∏ –≥–¥–µ.

| –ü–æ–ª–µ          | –¢–∏–ø           | –û–ø–∏—Å–∞–Ω–∏–µ                             |
|---------------|---------------|--------------------------------------|
| order_id      | INTEGER       | –£–Ω–∏–∫–∞–ª—å–Ω—ã–π ID –∑–∞–∫–∞–∑–∞                |
| reader_id     | INTEGER       | –í–Ω–µ—à–Ω–∏–π –∫–ª—é—á –∫ `readers`           |
| book_id       | INTEGER       | –í–Ω–µ—à–Ω–∏–π –∫–ª—é—á –∫ `books`             |
| library_id    | INTEGER       | –í–Ω–µ—à–Ω–∏–π –∫–ª—é—á –∫ `libraries`         |
| order_date    | DATE NOT NULL | –î–∞—Ç–∞ –≤—ã–¥–∞—á–∏                         |
| return_date   | DATE          | –î–∞—Ç–∞ –≤–æ–∑–≤—Ä–∞—Ç–∞                      |
| status        | TEXT          | –°—Ç–∞—Ç—É—Å (pending, completed –∏ —Ç.–¥.) |

**–°–≤—è–∑–∏:**
- `orders.reader_id ‚Üí readers.reader_id`
- `orders.book_id ‚Üí books.book_id`
- `orders.library_id ‚Üí libraries.library_id`

---

### 8. `reviews` ‚Äî –û—Ç–∑—ã–≤—ã –Ω–∞ –∫–Ω–∏–≥–∏
–û—Ü–µ–Ω–∫–∏ –∏ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ —á–∏—Ç–∞—Ç–µ–ª–µ–π.

| –ü–æ–ª–µ          | –¢–∏–ø           | –û–ø–∏—Å–∞–Ω–∏–µ                             |
|---------------|---------------|--------------------------------------|
| review_id     | INTEGER       | –£–Ω–∏–∫–∞–ª—å–Ω—ã–π ID –æ—Ç–∑—ã–≤–∞                |
| reader_id     | INTEGER       | –í–Ω–µ—à–Ω–∏–π –∫–ª—é—á –∫ `readers`           |
| book_id       | INTEGER       | –í–Ω–µ—à–Ω–∏–π –∫–ª—é—á –∫ `books`             |
| rating        | INTEGER       | –û—Ü–µ–Ω–∫–∞ (–æ—Ç 1 –¥–æ 5)                  |
| comment       | TEXT          | –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π                          |
| review_date   | DATE          | –î–∞—Ç–∞ –æ—Ç–∑—ã–≤–∞                         |

**–°–≤—è–∑–∏:**
- `reviews.reader_id ‚Üí readers.reader_id`
- `reviews.book_id ‚Üí books.book_id`

---

### 9. `employees` ‚Äî –°–æ—Ç—Ä—É–¥–Ω–∏–∫–∏ –±–∏–±–ª–∏–æ—Ç–µ–∫
–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ä–∞–±–æ—Ç–Ω–∏–∫–∞—Ö –±–∏–±–ª–∏–æ—Ç–µ–∫–∏.

| –ü–æ–ª–µ           | –¢–∏–ø           | –û–ø–∏—Å–∞–Ω–∏–µ                             |
|----------------|---------------|--------------------------------------|
| employee_id    | INTEGER       | –£–Ω–∏–∫–∞–ª—å–Ω—ã–π ID —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞             |
| first_name     | TEXT NOT NULL | –ò–º—è —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞                      |
| last_name      | TEXT NOT NULL | –§–∞–º–∏–ª–∏—è                              |
| position       | TEXT          | –î–æ–ª–∂–Ω–æ—Å—Ç—å                            |
| library_id     | INTEGER NOT NULL | –í–Ω–µ—à–Ω–∏–π –∫–ª—é—á –∫ `libraries`     |
| hire_date      | DATE          | –î–∞—Ç–∞ –Ω–∞–π–º–∞                           |

**–°–≤—è–∑–∏:**
- `employees.library_id ‚Üí libraries.library_id`
- `employee_roles.employee_id ‚Üí employees.employee_id`

---

### 10. `roles` ‚Äî –†–æ–ª–∏ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤
–ü–µ—Ä–µ—á–µ–Ω—å –≤–æ–∑–º–æ–∂–Ω—ã—Ö –¥–æ–ª–∂–Ω–æ—Å—Ç–µ–π.

| –ü–æ–ª–µ         | –¢–∏–ø           | –û–ø–∏—Å–∞–Ω–∏–µ                             |
|--------------|---------------|--------------------------------------|
| role_id      | INTEGER       | –£–Ω–∏–∫–∞–ª—å–Ω—ã–π ID —Ä–æ–ª–∏                  |
| name         | TEXT NOT NULL | –ù–∞–∑–≤–∞–Ω–∏–µ —Ä–æ–ª–∏                      |

**–°–≤—è–∑–∏:**
- `employee_roles.role_id ‚Üí roles.role_id`

---

### 11. `employee_roles` ‚Äî –°–≤—è–∑—å —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤ –∏ —Ä–æ–ª–µ–π
–ú–Ω–æ–≥–∏–µ –∫–æ –º–Ω–æ–≥–∏–º: –æ–¥–∏–Ω —Å–æ—Ç—Ä—É–¥–Ω–∏–∫ –º–æ–∂–µ—Ç –∏–º–µ—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ä–æ–ª–µ–π.

| –ü–æ–ª–µ               | –¢–∏–ø           | –û–ø–∏—Å–∞–Ω–∏–µ                             |
|--------------------|---------------|--------------------------------------|
| employee_role_id   | INTEGER       | –£–Ω–∏–∫–∞–ª—å–Ω—ã–π ID —Å–≤—è–∑–∏                 |
| employee_id        | INTEGER       | –í–Ω–µ—à–Ω–∏–π –∫–ª—é—á –∫ `employees`        |
| role_id            | INTEGER       | –í–Ω–µ—à–Ω–∏–π –∫–ª—é—á –∫ `roles`            |

**–°–≤—è–∑–∏:**
- `employee_roles.employee_id ‚Üí employees.employee_id`
- `employee_roles.role_id ‚Üí roles.role_id`

---

### 12. `notifications` ‚Äî –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è —á–∏—Ç–∞—Ç–µ–ª—è–º
–û—Ç–ø—Ä–∞–≤–ª—è–µ–º—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è.

| –ü–æ–ª–µ          | –¢–∏–ø           | –û–ø–∏—Å–∞–Ω–∏–µ                             |
|---------------|---------------|--------------------------------------|
| notification_id | INTEGER       | –£–Ω–∏–∫–∞–ª—å–Ω—ã–π ID —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è          |
| reader_id     | INTEGER       | –í–Ω–µ—à–Ω–∏–π –∫–ª—é—á –∫ `readers`           |
| message       | TEXT NOT NULL | –¢–µ–∫—Å—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è                  |
| sent_date     | DATE          | –î–∞—Ç–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏                      |

**–°–≤—è–∑–∏:**
- `notifications.reader_id ‚Üí readers.reader_id`

---

### 13. `settings` ‚Äî –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–∏—Å—Ç–µ–º—ã
–û–±—â–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã —Ä–∞–±–æ—Ç—ã —Å–∏—Å—Ç–µ–º—ã.

| –ü–æ–ª–µ         | –¢–∏–ø           | –û–ø–∏—Å–∞–Ω–∏–µ                             |
|--------------|---------------|--------------------------------------|
| setting_id   | INTEGER       | –£–Ω–∏–∫–∞–ª—å–Ω—ã–π ID –Ω–∞—Å—Ç—Ä–æ–π–∫–∏             |
| key          | TEXT UNIQUE   | –ö–ª—é—á –Ω–∞—Å—Ç—Ä–æ–π–∫–∏                      |
| value        | TEXT          | –ó–Ω–∞—á–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏                  |

---

### 14. `logs` ‚Äî –õ–æ–≥–∏ –æ–ø–µ—Ä–∞—Ü–∏–π
–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π –≤ –ë–î.

| –ü–æ–ª–µ             | –¢–∏–ø           | –û–ø–∏—Å–∞–Ω–∏–µ                             |
|------------------|---------------|--------------------------------------|
| log_id           | INTEGER       | –£–Ω–∏–∫–∞–ª—å–Ω—ã–π ID –ª–æ–≥–∞                 |
| table_name       | TEXT NOT NULL | –ù–∞–∑–≤–∞–Ω–∏–µ —Ç–∞–±–ª–∏—Ü—ã                     |
| operation_type   | TEXT NOT NULL | –¢–∏–ø –æ–ø–µ—Ä–∞—Ü–∏–∏ (INSERT, UPDATE, DELETE) |
| record_id        | INTEGER       | ID –∏–∑–º–µ–Ω—ë–Ω–Ω–æ–π –∑–∞–ø–∏—Å–∏                |
| timestamp        | DATETIME DEFAULT CURRENT_TIMESTAMP | –í—Ä–µ–º—è –æ–ø–µ—Ä–∞—Ü–∏–∏ |

---

### 15. `payments` ‚Äî –ü–ª–∞—Ç–µ–∂–∏ –∑–∞ –∫–Ω–∏–≥–∏
–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø–ª–∞—Ç–∞—Ö –∑–∞ –∫–Ω–∏–≥–∏.

| –ü–æ–ª–µ             | –¢–∏–ø           | –û–ø–∏—Å–∞–Ω–∏–µ                             |
|------------------|---------------|--------------------------------------|
| payment_id       | INTEGER       | –£–Ω–∏–∫–∞–ª—å–Ω—ã–π ID –ø–ª–∞—Ç–µ–∂–∞               |
| order_id         | INTEGER       | –í–Ω–µ—à–Ω–∏–π –∫–ª—é—á –∫ `orders`            |
| amount           | REAL NOT NULL | –°—É–º–º–∞ –ø–ª–∞—Ç–µ–∂–∞                       |
| payment_date     | DATE DEFAULT CURRENT_DATE | –î–∞—Ç–∞ –ø–ª–∞—Ç–µ–∂–∞     |

**–°–≤—è–∑–∏:**
- `payments.order_id ‚Üí orders.order_id`

---

### –ü—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ: –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –∫–Ω–∏–≥–∞—Ö —Å –∞–≤—Ç–æ—Ä–∞–º–∏ –∏ –∂–∞–Ω—Ä–∞–º–∏
```sql
CREATE VIEW book_author_genre_info AS
SELECT 
    b.title,
    a.name AS author_name,
    g.name AS genre_name
FROM books b
JOIN authors a ON b.author_id = a.author_id
JOIN genres g ON b.genre_id = g.genre_id;

---

### –¢—Ä–∏–≥–≥–µ—Ä: –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –Ω–æ–≤–æ–π –∫–Ω–∏–≥–∏

```sql
CREATE TRIGGER log_book_insert AFTER INSERT ON books
BEGIN
    INSERT INTO logs (table_name, operation_type, record_id)
    VALUES ('books', 'INSERT', NEW.book_id);
END;